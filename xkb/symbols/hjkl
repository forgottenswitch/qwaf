default partial alphanumeric_keys modifier_keys
xkb_symbols "shift" {
    include "hjkl(base)"
    include "level3_hjkl(comma_latch)"
    include "level5_hjkl(semic_shift)"
    include "level5_hjkl(ralt_lock)"
};

partial alphanumeric_keys modifier_keys
xkb_symbols "lock" {
    include "hjkl(base)"
    include "level3_hjkl(comma_latch)"
    include "level5_hjkl(semic_lock)"
    include "level5_hjkl(ralt_lock)"
};

partial alphanumeric_keys modifier_keys
xkb_symbols "base" {
    include "hjkl(lv1)"
    include "hjkl(lv3)"
    include "hjkl(lv5)"
};

partial alphanumeric_keys modifier_keys
xkb_symbols "lv5" {

    key.type = "SIX_LEVEL";

    key <TLDE> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, nobreakspace, U202f ] };
    key <AE01> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, ampersand, ampersand ] };
    key <AE02> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, plus, plusminus ] };
    key <AE03> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, less, guillemotleft ] };
    key <AE04> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, greater, guillemotright ] };
    key <AE05> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, minus, bar ] };
    key <AE06> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, asciicircum, at ] };
    key <AE07> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, Insert, Insert ] };
    key <AE08> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, Menu, Menu ] };
    key <AE09> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, leftsinglequotemark, U201b ] };
    key <AE10> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, rightsinglequotemark, singlelowquotemark ] };

    key <TAB>  { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, Tab, ISO_Left_Tab ] };
    key <AD01> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, exclam, question ] };
    key <AD02> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, colon, comma ] };
    key <AD03> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, parenleft, at ] };
    key <AD04> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, equal, numbersign ] };
    key <AD05> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, Tab, ISO_Left_Tab ] };
    key <AD06> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, Page_Up, Page_Up ] };
    key <AD07> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, BackSpace, BackSpace ] };
    key <AD08> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, Escape, Escape ] };
    key <AD09> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, Delete, Delete ] };
    key <AD10> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, Print, Print ] };
    key <AD11> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, XF86Back, XF86Back ] };
    key <AD12> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, XF86Forward, XF86Forward ] };

    key <AC01> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, slash, comma ] };
    key <AC02> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, ISO_Level2_Latch, ISO_Level2_Latch ] };
    key <AC03> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, braceleft, braceright ] };
    key <AC04> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, bracketleft, bracketright ] };
    key <AC05> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, parenright, asterisk ] };
    key <AC06> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, Left, Left ] };
    key <AC07> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, Down, Down ] };
    key <AC08> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, Up, Up ] };
    key <AC09> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, Right, Right ] };
    key <AC10> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, NoSymbol, NoSymbol ] };
    key <AC11> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, Insert, Insert ] };

    key <AB01> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, percent, U2215 ] };
    key <AB02> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, dollar, asciitilde ] };
    key <AB03> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, backslash, bar ] };
    key <AB04> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, quotedbl, apostrophe ] };
    key <AB05> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, semicolon, grave ] };
    key <AB06> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, Page_Down, Page_Down ] };
    key <AB07> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, Return, Return ] };
    key <AB08> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, Home, Home ] };
    key <AB09> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, End, End ] };
    key <AB10> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, ISO_Level5_Lock, ISO_Level5_Lock ] };

    key <SPCE> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol, space, space ] };
};

partial alphanumeric_keys modifier_keys
xkb_symbols "lv3" {

    key <TLDE> { [ NoSymbol, NoSymbol, U200b, U2060 ] };
    key <AE01> { [ NoSymbol, NoSymbol, section, exclamdown ] };
    key <AE02> { [ NoSymbol, NoSymbol, schwa, SCHWA ] };
    key <AE03> { [ NoSymbol, NoSymbol, U025b, U0190 ] };
    key <AE04> { [ NoSymbol, NoSymbol, ezh, EZH ] };
    key <AE05> { [ NoSymbol, NoSymbol, dead_macron, dead_belowmacron ] };
    key <AE06> { [ NoSymbol, NoSymbol, dead_breve, dead_belowbreve ] };
    key <AE07> { [ NoSymbol, NoSymbol, eng, ENG ] };
    key <AE08> { [ NoSymbol, NoSymbol, thorn, THORN ] };
    key <AE09> { [ NoSymbol, NoSymbol, leftdoublequotemark, U201f ] };
    key <AE10> { [ NoSymbol, NoSymbol, rightdoublequotemark, doublelowquotemark ] };
    key <AE11> { [ NoSymbol, NoSymbol, emdash, endash ] };
    key <AE12> { [ NoSymbol, NoSymbol, division, multiply ] };

    key <TAB>  { [ NoSymbol, NoSymbol, Undo, Redo ] };
    key <AD01> { [ NoSymbol, NoSymbol, dead_abovering, dead_belowring ] };
    key <AD02> { [ NoSymbol, NoSymbol, ssharp, U1e9e ] };
    key <AD03> { [ NoSymbol, NoSymbol, guillemotleft, guillemotright ] };
    key <AD04> { [ NoSymbol, NoSymbol, dead_ogonek, dead_abovereversedcomma ] };
    key <AD05> { [ NoSymbol, NoSymbol, dead_circumflex, dead_belowcircumflex ] };
    key <AD06> { [ NoSymbol, NoSymbol, dead_currency, dead_currency ] };
    key <AD07> { [ NoSymbol, NoSymbol, dead_diaeresis, dead_belowdiaeresis ] };
    key <AD08> { [ NoSymbol, NoSymbol, dead_stroke, dead_horn ] };
    key <AD09> { [ NoSymbol, NoSymbol, U0140, U013f ] };
    key <AD10> { [ NoSymbol, NoSymbol, kra, U017f ] };
    key <AD11> { [ NoSymbol, NoSymbol, ordfeminine, masculine ] };
    key <AD12> { [ NoSymbol, NoSymbol, hyphen, horizconnector ] };

    key <AC01> { [ NoSymbol, NoSymbol, dead_cedilla, dead_hook ] };
    key <AC02> { [ NoSymbol, NoSymbol, ISO_Level2_Latch, ISO_Level2_Latch ] };
    key <AC03> { [ NoSymbol, NoSymbol, dead_abovedot, dead_belowdot ] };
    key <AC04> { [ NoSymbol, NoSymbol, dead_acute, dead_doubleacute ] };
    key <AC05> { [ NoSymbol, NoSymbol, dead_grave, dead_doublegrave ] };
    key <AC06> { [ NoSymbol, NoSymbol, U200c, U200d ] };
    key <AC07> { [ NoSymbol, NoSymbol, underscore, underscore ] };
    key <AC08> { [ NoSymbol, NoSymbol, dead_tilde, dead_belowtilde ] };
    key <AC09> { [ NoSymbol, NoSymbol, dead_belowcomma, dead_abovecomma ] };
    key <AC10> { [ NoSymbol, NoSymbol, NoSymbol, NoSymbol ] };
    key <AC11> { [ NoSymbol, NoSymbol, apostrophe, quotedbl ] };

    key <AB01> { [ NoSymbol, NoSymbol, eth, ETH ] };
    key <AB02> { [ NoSymbol, NoSymbol, asciitilde, dollar ] };
    key <AB03> { [ NoSymbol, NoSymbol, backslash, bar ] };
    key <AB04> { [ NoSymbol, NoSymbol, dead_caron, dead_invertedbreve ] };
    key <AB05> { [ NoSymbol, NoSymbol, semicolon, grave ] };
    key <AB06> { [ NoSymbol, NoSymbol, Multi_key, Multi_key ] };
    key <AB07> { [ NoSymbol, NoSymbol, ISO_Next_Group, ISO_Prev_Group ] };
    key <AB08> { [ NoSymbol, NoSymbol, comma, less ] };
    key <AB09> { [ NoSymbol, NoSymbol, Menu, greater ] };
    key <AB10> { [ NoSymbol, NoSymbol, dead_greek, dead_greek ] };

    key <SPCE> { [ NoSymbol, NoSymbol, space, space ] };

};


partial alphanumeric_keys
xkb_symbols "lv1" {

    key <AC11> { [ comma, colon ] };
    key <SPCE> { [ NoSymbol, space ] };

};

partial modifier_keys
xkb_symbols "swap_menu_rwin" {
    replace key <RWIN> { [ Menu, Menu ] };
    replace key <MENU> { [ Super_R, Super_R ] };
    modifier_map Mod4 { <MENU> };
};

partial modifier_keys
xkb_symbols "rwin_as_hyper" {

    // this has no effect; either use
    //  xmodmap -e "remove mod2 = Num_Lock"
    // or xkb_compat "...+l5etc(no_numlock)"
    //replace key <NMLK> { [ NoSymbol, NoSymbol ]  };

    replace key <RWIN> { [ Hyper_R, Hyper_R ] };
    modifier_map Mod2 { <RWIN> };
};

partial modifier_keys
xkb_symbols "latching_shifts" {
    key <RTSH> { [ ISO_Level2_Latch, ISO_Level2_Latch ] };
    key <LFSH> { [ ISO_Level2_Latch, ISO_Level2_Latch ] };
};

partial modifier_keys
xkb_symbols "redirs" {
    key <AC06> { [ NoSymbol, NoSymbol,  NoSymbol, NoSymbol,  ISO_Fast_Cursor_Left, ISO_Fast_Cursor_Left ] };
    key <AC07> { [ NoSymbol, NoSymbol,  NoSymbol, NoSymbol,  ISO_Fast_Cursor_Down, ISO_Fast_Cursor_Down ] };
    key <AC08> { [ NoSymbol, NoSymbol,  NoSymbol, NoSymbol,  ISO_Fast_Cursor_Up, ISO_Fast_Cursor_Up ] };
    key <AC09> { [ NoSymbol, NoSymbol,  NoSymbol, NoSymbol,  ISO_Fast_Cursor_Right, ISO_Fast_Cursor_Right ] };

    key <AB06> { [ NoSymbol, NoSymbol,  NoSymbol, NoSymbol,  ISO_Partial_Line_Down, ISO_Partial_Line_Down ] };
    key <AD06> { [ NoSymbol, NoSymbol,  NoSymbol, NoSymbol,  ISO_Partial_Line_Up, ISO_Partial_Line_Up ] };
    key <AB08> { [ NoSymbol, NoSymbol,  NoSymbol, NoSymbol,  ISO_Partial_Space_Left, ISO_Partial_Space_Left ] };
    key <AB09> { [ NoSymbol, NoSymbol,  NoSymbol, NoSymbol,  ISO_Partial_Space_Right, ISO_Partial_Space_Right ] };

    key <AD07> { [ NoSymbol, NoSymbol,  NoSymbol, NoSymbol,  ISO_Set_Margin_Left, ISO_Set_Margin_Left ] };
    key <AD09> { [ NoSymbol, NoSymbol,  NoSymbol, NoSymbol,  ISO_Set_Margin_Right, ISO_Set_Margin_Right ] };

    key <AB07> { [ NoSymbol, NoSymbol,  NoSymbol, NoSymbol,  ISO_Release_Margin_Left, ISO_Release_Margin_Left ] };
    key <AE07> { [ NoSymbol, NoSymbol,  NoSymbol, NoSymbol,  ISO_Release_Margin_Right, ISO_Release_Margin_Right ] };
    key <AD08> { [ NoSymbol, NoSymbol,  NoSymbol, NoSymbol,  ISO_Release_Both_Margins, ISO_Release_Both_Margins ] };
};

